/*!
 * angular-sticky-box
 * https://github.com/pcassis/angular-sticky-box
 * Version: 0.0.2 - 2017-03-14T22:30:50.556Z
 * License: MIT
 */
"use strict";angular.module("angular-sticky-box",[]).directive("stickyBox",["$timeout",function(e){function t(e,t){if(e.innerHeight=t.children[0].offsetHeight,e.innerHeight>=t.offsetHeight)return void(e.enabled=!1);e.enabled=!0;var o=t;for(e.wrapTop=t.offsetTop;o.offsetParent;)e.wrapTop+=o.offsetParent.offsetTop,o=o.offsetParent;e.wrapBottom=t.offsetHeight+e.wrapTop,a=window.innerHeight||document.documentElement.clientHeight,e.innerHeight>a?(e.sizeClass="sticky-inner-big",e.breaks=[{top:e.wrapBottom-a,className:"bottom",style:[["top",t.offsetHeight-e.innerHeight+"px"]]},{top:e.wrapTop-e.cfg.offset,className:"top",style:[["top","auto"]],up:function(e,t){e.pageYup=window.pageYOffset;var s=parseInt(t.children[0].style.bottom);e.pageYdown-window.pageYOffset<=e.innerHeight-a+e.cfg.offset?t.children[0].style.bottom=s+window.pageYOffset-e.pageY+"px":t.children[0].style.bottom=a-e.innerHeight-e.cfg.offset+"px"},down:function(e,t){e.pageYdown=window.pageYOffset,e.pageYup||(e.pageYup=e.pageY);var s=parseInt(t.children[0].style.bottom);isNaN(s)&&(s=a-e.innerHeight-e.cfg.offset),s<0?t.children[0].style.bottom=s+window.pageYOffset-e.pageY+"px":t.children[0].style.bottom="0px"}}],t.children[0].className=e.sizeClass+" "+e.posClass):(e.sizeClass="sticky-inner-small",e.breaks=[{top:e.wrapBottom-e.innerHeight-e.cfg.offset,className:"bottom",style:[["top",t.offsetHeight-e.innerHeight+"px"]]},{top:e.wrapTop-e.cfg.offset,className:"top",style:[["top",e.cfg.offset+"px"]]}],t.children[0].className=e.sizeClass+" "+e.posClass),t.children[0].style.width=t.offsetWidth+"px",s(e,t)}function s(e,t){if(e.enabled){window.pageYOffset+e.cfg.offset>e.wrapTop?-1==t.className.indexOf("sticky-fix")&&(t.className+=" sticky-fix"):-1!=t.className.indexOf(" sticky-fix")&&(t.className=t.className.replace(" sticky-fix",""));for(var s=!1,a=0;a<e.breaks.length;a++)if(window.pageYOffset>e.breaks[a].top){if(e.posClass!=e.breaks[a].className){e.posClass=e.breaks[a].className;for(var o=0;o<e.breaks[a].style.length;o++)t.children[0].style[e.breaks[a].style[o][0]]=e.breaks[a].style[o][1]}s=e.breaks[a];break}s?window.pageYOffset>e.pageY?s.down&&s.down(e,t):s.up&&s.up(e,t):e.posClass="",e.pageY=window.pageYOffset,t.children[0].className=e.sizeClass+" "+e.posClass}}var a;return{restrict:"A",scope:{offset:"@stickyBoxOffset"},link:function(a,o){function n(){t(a,i)}var i=o[0];i.className+=" sticky-box",a.cfg={},a.offset?a.cfg.offset=parseInt(a.offset):a.cfg.offset=0,a.pageY=a.pageYup=a.pageYdown=window.pageYOffset,angular.element(window).on("resize",function(){e.cancel(a.resizing),a.resizing=e(function(){t(a,i)})}),angular.element(window).on("scroll",function(){s(a,i)}),a.$on("stickyBoxUpdate",function(){e(n,100)}),e(n,100)}}}]),angular.module("angular-sticky-box").run(["$templateCache",function(e){e.put("angular-sticky-box.html",'<div class="angular-sticky-box"><div>The value is {{getValue()}}</div><button ng-click="increment()">+</button></div>')}]);